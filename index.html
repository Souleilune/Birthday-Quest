<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Birthday Quest</title>
  <meta name="description" content="Retro pixel-art maze runner with shadow mode, story + daily mazes, minimap, and pixel scroll." />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="page">
    <header class="topbar">
      <div class="brand">Birthday Quest</div>
      <div id="hud" class="hud">
        <span id="mazeStatus">Maze 1 / 3</span>
        <span id="playerLabel" class="player-label"></span>
        <span id="timer" class="timer" aria-live="polite">‚è± 00:00</span>
        <div class="hud-buttons">
          <button id="btn-map" class="icon-btn" title="Toggle minimap (M)" aria-pressed="false">MAP</button>
          <button id="btn-shadow" class="icon-btn" title="Toggle shadow (Fog of War)" aria-pressed="true">SHDW</button>
          <button id="btn-crt" class="icon-btn" title="Toggle CRT" aria-pressed="false">CRT</button>
          <button id="btn-mute" class="icon-btn" title="Mute/Unmute" aria-pressed="false">üîä</button>
        </div>
      </div>
    </header>

    <main class="stage">
      <div class="canvas-wrap">
        <canvas id="game" width="672" height="480" tabindex="0" aria-label="Maze canvas"></canvas>
      </div>
    </main>

    <!-- Start Overlay -->
    <section id="overlay-start" class="overlay visible" aria-modal="true" role="dialog">
      <div class="panel">
        <h1>Maze Quest</h1>
        <p class="subtitle">Keep navigating through the darkness. Search for the light.</p>

        <div class="section">
          <h2>Enter your name</h2>
          <div class="name-input">
            <input id="player-name" type="text" maxlength="18" placeholder="Type your name..." aria-label="Player name" autocomplete="name" />
          </div>
        </div>

        <div class="section">
          <h2>Choose your hero</h2>
          <div class="char-select">
            <button id="pick-male" class="char-btn" aria-label="Pick male hero" disabled>
              <canvas id="male-canvas" width="96" height="96"></canvas>
              <span style="color: white;">Adventurer (M)</span>
            </button>
            <button id="pick-female" class="char-btn" aria-label="Pick female hero" disabled>
              <canvas id="female-canvas" width="96" height="96"></canvas>
              <span style="color: white;">Adventurer (F)</span>
            </button>
          </div>
        </div>

        <div id="start-actions" class="actions">
          <button id="btn-start" class="btn primary" disabled>Start Story</button>
          <button id="btn-daily" class="btn secondary">Daily Maze</button>
          <button id="btn-continue" class="btn secondary hidden">Continue</button>
          <button id="btn-reset" class="btn danger hidden" title="Clear saved progress">Reset Progress</button>
        </div>

        <div class="help">
          Move: Arrow Keys / WASD ‚Ä¢ Hold Shift or ‚ö° (mobile) to sprint ‚Ä¢ Minimap: M ‚Ä¢ Shadow toggle: SHDW
        </div>
      </div>
    </section>

    <!-- Level Complete Overlay with Pixel Scroll + Wax -->
    <section id="overlay-complete" class="overlay" aria-modal="true" role="dialog">
      <div class="panel">
        <h2>Maze Complete!</h2>
        <p id="mode-label" class="mode-label">Mode: Story</p>

        <div class="scroll" id="scroll">
          <div class="rod top" aria-hidden="true"></div>

          <div class="scroll-paper" id="scroll-paper">
            <p id="fragment-text" class="fragment" aria-live="polite">Part 1: ...</p>
          </div>

          <div class="wax" id="wax" aria-hidden="true">
            <span id="wax-glyph" class="glyph">‚òÖ</span>
          </div>

          <div class="rod bottom" id="scroll-rod-bottom" aria-hidden="true"></div>
        </div>

        <p id="level-time" class="time">Time: 00:00 ‚Ä¢ Best: --:--</p>

        <div class="actions">
          <button id="btn-next" class="btn primary">Next Maze</button>
        </div>
      </div>
    </section>

    <!-- Win Overlay -->
    <section id="overlay-win" class="overlay" aria-modal="true" role="dialog">
      <canvas id="confetti" class="confetti" aria-hidden="true"></canvas>
      <div class="panel">
        <h2>Happy Birthday!</h2>
        <div id="final-message" class="final"></div>
        <div class="actions">
          <button id="btn-restart" class="btn primary">Play Again</button>
        </div>
      </div>
    </section>

    <!-- Mobile D-pad -->
    <div class="touch-controls" id="touch-controls" aria-hidden="true">
      <button data-dir="up" class="pad up" aria-label="Move up">‚ñ≤</button>
      <div class="row">
        <button data-dir="left" class="pad left" aria-label="Move left">‚óÄ</button>
        <button data-dir="sprint" class="pad sprint" aria-label="Sprint">‚ö°</button>
        <button data-dir="right" class="pad right" aria-label="Move right">‚ñ∂</button>
      </div>
      <button data-dir="down" class="pad down" aria-label="Move down">‚ñº</button>
    </div>

    <footer class="footer">
      <span>WASD / Arrow Keys to move ‚Ä¢ Shift to sprint ‚Ä¢ Auto-saves progress</span>
    </footer>
  </div>

  <script src="game.js"></script>
</body>
</html>